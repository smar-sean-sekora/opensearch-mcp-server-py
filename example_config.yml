version: "1.0"
description: "Unified OpenSearch MCP Server Configuration"

# ==============================================================================
# Index Security Configuration (supported in both Single and Multi Mode)
# ==============================================================================
# Control which indexes can be accessed by the MCP server.
# This provides an additional security layer on top of OpenSearch permissions.
#
# Priority: Denied patterns are checked first. If an index matches a denied pattern,
# access is blocked regardless of allowed patterns.
#
# Pattern types supported:
# - Wildcards: Use * and ? for simple patterns (e.g., "logs-*", "test-?-index")
# - Regex: Prefix with "regex:" for complex patterns (e.g., "regex:^logs-\d{4}-\d{2}$")
#
# Note: If no patterns are configured, all indexes are accessible.
#
# index_security:
#   allowed_index_patterns:
#     - "logs-*"              # Allow all indexes starting with "logs-"
#     - "metrics-*"           # Allow all indexes starting with "metrics-"
#     - "app-production-*"    # Allow all production app indexes
#     - "regex:^test-\d+$"    # Allow indexes like "test-123", "test-456"
#   denied_index_patterns:
#     - "sensitive-*"         # Block all indexes starting with "sensitive-"
#     - ".security*"          # Block security-related indexes
#     - "*-internal"          # Block all indexes ending with "-internal"
#     - "regex:.*-dev-.*"     # Block indexes containing "-dev-"

# Cluster configurations (used in Multi Mode)
clusters:
  local-cluster:
    opensearch_url: "http://localhost:9200"
    opensearch_username: "admin"
    opensearch_password: "your_password_here"

  remote-cluster:
    opensearch_url: "https://your-opensearch-domain.us-east-2.es.amazonaws.com"
    profile: "your-aws-profile"
  
  remote-cluster-with-iam:
    opensearch_url: "https://your-opensearch-domain.us-east-2.es.amazonaws.com"
    iam_arn: "arn:aws:iam::123456789012:role/YourOpenSearchRole"
    aws_region: "us-east-2"
    profile: "your-aws-profile"

  serverless-cluster:
    opensearch_url: "https://collection-id.us-east-1.aoss.amazonaws.com"
    aws_region: "us-east-1"
    profile: "your-aws-profile"
    is_serverless: true

# Tool customization configurations (supported in both Single and Multi Mode)
tools:
  ListIndexTool:
    display_name: "My_Custom_Index_Lister"
    description: "This is a custom description for the tool that lists indices. It's much more descriptive now!"
    args:
      index: "Custom description for the 'index' argument in ListIndexTool."
  SearchIndexTool:
    display_name: "Super_Searcher"
    args:
      index: "Custom description for the 'index' argument in SearchIndexTool."
      query: "Explain what kind of query JSON is expected here."
  GetShardsTool:
    description: "A better description to get information about shards in OpenSearch."
    args:
      index: "Target index whose shards will be listed."

# ==============================================================================
# Tool filtering configurations (ONLY supported in Single Mode)
# ==============================================================================
# Note: These sections are ignored in Multi Mode. Tool filtering only works
# when using Single Mode (--mode single or default mode).
# Uncomment the sections below if you're using Single Mode and want to filter tools.

# tool_category:
#   search_tools:
#     - "SearchIndexTool"
#     - "MsearchTool"
#   management_tools:
#     - "ListIndexTool"
#     - "CreateIndexTool"
#     - "DeleteIndexTool"

# tool_filters:
#   disabled_tools:
#     - "DangerousTool"  # Example: disable dangerous tools
#   disabled_categories:
#     - "experimental_tools"  # Example: disable experimental tool category  
#   disabled_tools_regex:
#     - "debug.*"  # Example: disable all tools starting with debug
#   settings:
#     allow_write: true  # Enable/disable write operations


# Example configurations for different authentication methods:
# 
# 1. IAM Role Authentication (recommended for production):
#    - Requires: opensearch_url, iam_arn, aws_region, profile
#    - Uses AWS IAM roles for authentication
#
# 2. Basic Authentication:
#    - Requires: opensearch_url, opensearch_username, opensearch_password
#    - Uses username/password for authentication
#
# 3. AWS Profile Authentication:
#    - Requires: opensearch_url, profile
#    - Uses AWS credentials from the specified profile
#
# 4. OpenSearch Serverless:
#    - Requires: opensearch_url, aws_region
#    - Optional: profile, is_serverless: true 